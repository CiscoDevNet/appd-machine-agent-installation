---
###############################################################
# This playbook installs Docker and an Apache Web Server and
# opens ports on the firewall
###############################################################
#- name: Pause for 30 seconds and wait for all virtual machines to be up and running
# Pause for 30 seconds and wait for all virtual machines to be up and running
# -  pause:
#     seconds: 30

- name: Install and manage one or more Apache Web Server(s)
  hosts: all
  become: yes
  tasks:
    - name: Include group variables
      include_vars:
        file: variables.yml
    - name: Configure /etc/resolv.conf
      include_role:
        name: resolv.conf
      tags:
        - configure_resolv_conf
    - name: Open ports needed for the Apache Web HTTP Server
      include_role:
        name: firewalld
    - name: Install Apache
      include_role:
        name: apache-web-server
      tags:
        - install_apache
    - name: Install the AppDynamics Machine agent
      include_role:
        name: appd-machine-agent